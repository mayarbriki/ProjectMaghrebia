<div class="list-claim-container">
    <div class="header-container">
        <h3>List of Claims</h3>
        <div class="header-actions">
            <!-- Recherche avancée -->
            <input 
                type="text" 
                placeholder="Search Claims" 
                [(ngModel)]="searchQuery" 
                (input)="applySearch()" 
                class="search-input" />

            <!-- Tri -->
            <select [(ngModel)]="selectedSort" (change)="applySort()" class="sort-select">
                <option value="name">Sort by Claim Name</option>
                <option value="date">Sort by Full Name</option>
                <option value="date">Sort by Date</option>
                
            </select>

            <!-- Bouton Ajouter une réclamation -->
            <button class="btn btn-success" (click)="navigateToAddClaim()"> Add Claim</button>
        </div>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Full Name</th>
                <th>Claim Name</th>
                <th>Submission Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let claim of filteredClaims; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ claim.fullName }}</td>
                <td>{{ claim.claimName }}</td>
                <td>{{ claim.submissionDate | date:'yyyy-MM-dd' }}</td>
                <td>
                    <select
                    [ngModel]="claim.statusClaim"
                    (ngModelChange)="changeStatus(claim, $event)"
                    class="form-control"
                  >
                    <option *ngFor="let status of statusOptions" [value]="status">{{ status }}</option>
                  </select>
                  
                  </td>
                                        
                 <td class="actions">
                    <button class="btn btn-primary btn-sm" (click)="viewClaim(claim.idClaim)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM8 12.5c-2.485 0-4.5-2.015-4.5-4.5S5.515 3.5 8 3.5s4.5 2.015 4.5 4.5-2.015 4.5-4.5 4.5z"/>
                            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"/>
                        </svg>
                    </button>
                    <button class="btn btn-warning btn-sm" (click)="editClaim(claim.idClaim)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .707l-1.768 1.768-2.121-2.122 1.768-1.768a.5.5 0 0 1 .707 0l1.414 1.415z"/>
                            <path d="M1 13.5V16h2.5l9.646-9.646-2.121-2.122L1 13.5z"/>
                        </svg>
                    </button>
                    <button class="btn btn-danger btn-sm" (click)="deleteClaim(claim.idClaim)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                            <path d="M6 1v1H3v1h10V2h-3V1H6zm1 3v9h2V4H7zm-3 0h1v9H4V4zm7 0h1v9h-1V4z"/>
                        </svg>
                    </button>
                    <button class="btn btn-info btn-sm" (click)="viewAssessment(claim.idClaim)">View Assessment</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
